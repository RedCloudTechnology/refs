{
  "name": "refs",
  "tagline": "Compile YAML or JSON config files together through file path references using `$ref` setting",
  "body": "### Install:\r\n\r\n```bash\r\n$ npm install -g refs\r\n```\r\n\r\n### Example:\r\n\r\n#### Template(s):\r\n```yaml\r\nAWSTemplateFormatVersion: '2010-09-09'\r\n\r\nResources:\r\n  - $ref: ./relative/path/to/file.yaml\r\n```\r\n```yaml\r\nRolePolicies:\r\n  $ref: ./resources/role-policies.yaml\r\n```\r\n```yaml\r\nType: 'AWS::IAM::Policy'\r\nProperties:\r\n  PolicyName: custom-role\r\n  Roles:\r\n    - custom-role\r\n  PolicyDocument:\r\n    Version: '2012-10-17'\r\n    Statement:\r\n      -\r\n        Sid: PassRole\r\n        Effect: Allow\r\n        Resource:\r\n          -\r\n            'Fn::Join':\r\n              - \"\"\r\n              -\r\n                - 'arn:aws:iam::'\r\n                -\r\n                  Ref: 'AWS::AccountId'\r\n                - ':role/*'\r\n        Action:\r\n          - 'iam:PassRole'\r\n```\r\n\r\n#### Code:\r\n```javascript\r\n'use strict';\r\n\r\nconst path = require('path');\r\nconst refs = require('refs');\r\n\r\nconst templateDir = `${__dirname}/../templates`;\r\nconst buildDir = `${__dirname}/../build`;\r\nconst inputTemplate = path.resolve(`${templateDir}/template.yaml`);\r\nconst outputFile = path.resolve(`${buildDir}/output-template.yaml`);\r\n\r\ntry {\r\n  refs(inputTemplate, outputFile)\r\n    .then((results) => {\r\n      console.log(`\\n  File written: ${results.outputFile}`);\r\n    });\r\n} catch (e) {\r\n  console.error(e.message);\r\n  console.error(e.stack);\r\n}\r\n```\r\n\r\n#### Or cli:\r\n```bash\r\n$ refs -o ./build/output.yaml ./templates/main.yaml\r\n```\r\n\r\n#### Output:\r\n```yaml\r\nAWSTemplateFormatVersion: '2010-09-09'\r\nResources:\r\n  - RolePolicies:\r\n      Type: 'AWS::IAM::Policy'\r\n      Properties:\r\n        PolicyName: custom-role\r\n        Roles:\r\n          - custom-role\r\n        PolicyDocument:\r\n          Version: '2012-10-17'\r\n          Statement:\r\n            - Sid: PassRole\r\n              Effect: Allow\r\n              Resource:\r\n                - 'Fn::Join':\r\n                    - ''\r\n                    - - 'arn:aws:iam::'\r\n                      - Ref: 'AWS::AccountId'\r\n                      - ':role/*'\r\n              Action:\r\n                - 'iam:PassRole'\r\n```",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}